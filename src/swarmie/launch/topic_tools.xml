<launch>
  <arg name="name"/>
  <arg name="simulation"/>

  <arg if="$(arg simulation)" name="rate" value="10.0"/>
  <arg unless="$(arg simulation)" name="rate" value="1.0"/>

  <group ns="relay">
    <node name="odom_ekf" pkg="topic_tools" type="relay"
          args="/$(arg name)/odom/filtered_throttle /$(arg name)/odom/ekf_throttle">
      <param name="lazy" value="true" />
    </node>
  </group>

  <group ns="throttle">
    <node name="imu" pkg="topic_tools" type="throttle"
          args="messages /$(arg name)/imu $(arg rate)">
      <param name="lazy" value="true" />
    </node>

    <node name="navsol" pkg="topic_tools" type="throttle"
          args="messages /$(arg name)/navsol $(arg rate)">
      <param name="lazy" value="true" />
    </node>

    <node name="odom_filtered" pkg="topic_tools" type="throttle"
          args="messages /$(arg name)/odom/filtered $(arg rate)">
      <param name="lazy" value="true" />
    </node>

    <node name="sonarCenter" pkg="topic_tools" type="throttle"
          args="messages /$(arg name)/sonarCenter $(arg rate)">
      <param name="lazy" value="true" />
    </node>

    <node name="sonarRight" pkg="topic_tools" type="throttle"
          args="messages /$(arg name)/sonarRight $(arg rate)">
      <param name="lazy" value="true" />
    </node>

    <node name="sonarLeft" pkg="topic_tools" type="throttle"
          args="messages /$(arg name)/sonarLeft $(arg rate)">
      <param name="lazy" value="true" />
    </node>

    <node name="targets_image" pkg="topic_tools" type="throttle"
          args="messages /$(arg name)/targets/image/compressed $(arg rate) /$(arg name)/targets/image_throttle/compressed">
      <param name="lazy" value="true" />
    </node>
  </group>
</launch>
